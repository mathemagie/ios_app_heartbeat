<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Heart Rate Live</title>
    <style> body { font-family: system-ui, sans-serif; } #bpm { font-size: 40px; } </style>
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js'
      import { getDatabase, ref, onValue } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js'

      const firebaseConfig = {
        apiKey: 'YOUR_API_KEY',
        authDomain: 'YOUR_AUTH_DOMAIN',
        databaseURL: 'YOUR_DB_URL',
        projectId: 'YOUR_PROJECT_ID',
        storageBucket: 'YOUR_BUCKET',
        messagingSenderId: 'YOUR_SENDER',
        appId: 'YOUR_APP_ID'
      }

      const app = initializeApp(firebaseConfig)
      const db = getDatabase(app)

      const params = new URLSearchParams(location.search)
      const shareId = params.get('share') || 'demo'
      const latestRef = ref(db, `publicStreams/${shareId}/latest`)

      onValue(latestRef, (snap) => {
        const data = snap.val()
        document.getElementById('bpm').textContent = data ? `${data.bpm} bpm` : '—'
        document.getElementById('meta').textContent = data ? `${data.source} @ ${data.end}` : ''
      })
    </script>
  </head>
  <body>
    <h1>Heart Rate</h1>
    <div id="bpm">—</div>
    <div id="meta" style="color:#666"></div>
    <p>Use URL like: <code>?share=YOUR_SHARE_ID</code></p>
  </body>
</html>


